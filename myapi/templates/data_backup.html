<!DOCTYPE html>
{% extends "home.html" %}

{% block content %}

<table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
  <thead>
    <tr>
      <th>File name</th>
      <th>Path</th>
      <th>Original</th>
      <th>Category</th>
      <th>Value</th>
      <th>Fname</th>
      <th>Lname</th>
      <th>Company</th>
      <th>Phone</th>
    </tr>
  </thead>
  <tbody>
    {% for file in files_data %}
      <tr>
        <th>{{file.file}}</th>
        <th>{{file.data}}</th>
        <th>{{file.data.name}}</th>
        <th>{{file.data.category}}</th>
        <th>{{file.data.value}}</th>
        <th>{{file.data.contact.cont_fname}}</th>
        <th>{{file.data.contact.cont_lname}}</th>
        <th>{{file.data.contact.cont_company}}</th>
        <th>{{file.data.contact.cont_phone}}</th>
      </tr>
      {% endfor %}

  </tbody>

<datalist id="searchable">
      {% for file in files_contacts %}
        <option value={{file.cont_fname}}>
        <option value={{file.cont_lname}}>
        {% endfor %}
    </datalist>

  <form class="form-group row" method="GET" action="" >
      <input class="form-group row" type="text" list="searchable" name="search">
      <button class="form-group row" type="submit"> Search </button>
  </form>

<div class="container-fluid">

  <form method="post" action="." id="form_id" enctype="multipart/form-data">{% csrf_token %}

    <div class="form-group row" align="right">
      <label class="col-form-label col-sm-4">Title</label>
      <div class="col-sm-5">
          <input type="text" class="form-control" name='title' required>
      </div>
    </div>

    <div class="form-group row" align="right">
      <label class="col-form-label col-sm-4">Category</label>
      <div class="col-sm-5">
          <input type="text" class="form-control" name='title'>
      </div>
    </div>

    <div class="form-group row" align="right">

      <div class="col-sm-5">
        <form>
          <label for="contacts">Choose a contact:</label>
            <select id="contacts" name="contacts">
              {% for contact in files_contacts %}
              <!-- put value of contact here! --!>
                <option value={{contact.cont_fname}}>{{contact.cont_fname}} {{contact.cont_lname}}</option>
                {% endfor %}
            </select>
        </form>
      </div>
    </div>

    <div class="form-group row" align="right">
      <label class="col-form-label col-sm-4">Files</label>
      <div class="col-sm-5 ml-3" style="text-align: left;">
        <input type="file" class="custom-file-input" id="id_file" name="file" accept=".pdf" required>
        <label class="custom-file-label file" for="id_file" data-browse="Browse">{{file_name}}</label>
      </div>
    </div>
    <div class="form-group row">
      <div class="offset-sm-5 py-2 submit">
          <button type="submit" class="btn btn-primary" value="add_file">Add File</button>
      </div>
    </div>

    <!-- handle display file name -->
    <script>


        $('#id_file').on('change',function(){
            var file_name = $(this).val().pop();
            $('.file').html(file_name);
        })
    </script>







    <div class="form-group row">
      <div class="offset-sm-4 pt-5">
        {% if messages %}
          {% for message in messages %}
              <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
                    {{ message }}
              </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </form>
</div>

{% endblock content %}